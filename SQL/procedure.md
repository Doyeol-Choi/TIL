# 프로시저
* 기본 PL/SQL 에서 사용하는 절차적 프로그래밍은 그때 그때 만들어서 사용해야하는 불편함이 있다.

* 이런 프로그래밍 코드를 묶음으로 지정하기 위한 것이 프로시저이다.

* 절차적 코드를 하나의 이름 아래 묶어두면 재사용시 이름만으로 해당 코드를 실행할 수 있다.

* 프로시저를 생성하기 위해서는 CREATE 명령을 사용한다.
```sql
CREATE [OR REPLACE] PROCEDURE 프로시저 이름
IS
    선언부
BEGIN
    실행부
END;
```
* 한번 만들어둔 프로시저는 언제든지 이름만 호출하면 사용이 가능하다.
```sql
EXECUTE 프로시저 이름;
```
* DROP 명령으로 프로시저를 삭제할 수 있다.
```sql
DROP PROCEDURE 프로시저이름;
```

----------------------------------------------------------
# 함수
* 함수는 프로시저와 다르게 매개변수를 활용하지 않고 어떤 결
과를 반환하기 위해 사용된다.
* 프로시저는 매개변수의 개수만큼 반환한다면 함수는 단 하나의
결과만을 반환한다.

* 함수의 생성방법
    ```sql
    CREATE [OR REPLACE] FUNCTION 함수명 (매개변수)
    반환타입
    IS
        선언부
    BEGIN
        실행부
        return 반환할데이터;
    END;
    ```

* 함수의 사용방법
    ```sql
    VARIABLE 변수명 타입;
    EXECUTE :변수명 := 함수(매개변수);
    PRINT 변수;
    ```
  - SELECT 문 내부에서 함수를 사용 가능하다.
  ```sql
  SELECT 함수명(매개변수) FROM 테이블명;
  ```

----------------------------------------------------------
# 트리거
* 어떤 조건에 의해 자동으로 실행되는 프로시저이다.

* 트리거는 프로시저와 유사하지만 실행되는 원리가 다르다.

* 프로시저는 작성 후 EXECUTE 명령어를 통해서 직접 실행하지만
트리거는 어떤 이벤트 주로 DML) 가 발생했을 때 내부적 으로
실행되는 저장된 프로시저이다.

* 프로시저의 형태이지만 단독으로 사용되기 보다 DML 구문에 붙여서 사용이 된다.

* 종류
  - AFTER 트리거 : DML 등의 작업이 일어났을 때 작동하는 트리거 , 해당 작업 후에 작동한다. (테이블에만 작동)  
  :new와 :old 생성
  - BEFORE 트리거 : DML 등의 작업이 일어났을 때 작동하는 트리거 , 해당 작업 직전에 작동한다.  
  :new와 :old 생성하지 않음  

    ```sql
    -- AFTER 트리거 예시
    -- 테이블A에 insert시 테이블B 에도 같이 insert한다
    CREATE OR REPLACE TRIGGER 트리거이름
    AFTER INSERT
    ON 테이블A
    for each row    -- 각 행마다 적용
    BEGIN
        IF inserting THEN   -- INSERT가 동작 되었다면
            dbms_output.put_line('INSERT TRIGGER 발생');
            INSERT INTO 테이블B VALUES(:new.컬럼1, :new.컬럼2, ...);
        END IF;
    END;
    ```

* 백업에 주로 사용된다.